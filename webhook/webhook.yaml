apiVersion: webhookconfig.keptn.sh/v1alpha1
kind: WebhookConfig
metadata:
  name: webhook-configuration
spec:
  webhooks:
    - type: sh.keptn.event.github-action-silent.triggered
      sendFinished: true
      requests:
        - "curl --header 'Authorization: token
          {{.env.secret_githubsecret_GITHUBTOKEN}}' --request POST --data
          '{\"event_type\":\"silent\",\"client_payload\":{\"type\":\"{{.type}}\
          \",\"project\":\"{{.data.project}}\",\"service\":\"{{.data.service}}\
          \",\"stage\":\"{{.data.stage}}\",\"shkeptncontext\":\"{{.shkeptnconte\
          xt}}\",\"id\":\"{{.id}}\"}}'
          https://api.github.com/repos/dt-alliances/ca-demo-github/dispatches"
      envFrom:
        - name: secret_githubsecret_GITHUBTOKEN
          secretRef:
            name: github-secret
            key: GITHUBTOKEN
      subscriptionID: 5eebbb8d-42eb-4d9c-9405-c3fe864289f6
    - type: sh.keptn.event.github-action-interactive.triggered
      requests:
        - "curl --header 'Authorization: token
          {{.env.secret_githubsecret_GITHUBTOKEN}}' --request POST --data
          '{\"event_type\":\"interactive\",\"client_payload\":{\"type\":\"{{.ty\
          pe}}\",\"project\":\"{{.data.project}}\",\"service\":\"{{.data.servic\
          e}}\",\"stage\":\"{{.data.stage}}\",\"shkeptncontext\":\"{{.shkeptnco\
          ntext}}\",\"id\":\"{{.id}}\",\"custom-interactive-attribute\":\"custo\
          m-interactive-value\"}}'
          https://api.github.com/repos/dt-alliances/ca-demo-github/dispatches"
      envFrom:
        - name: secret_githubsecret_GITHUBTOKEN
          secretRef:
            name: github-secret
            key: GITHUBTOKEN
      subscriptionID: 867d0a56-69ef-4dde-87c3-264e81a14362
    - type: sh.keptn.event.evaluation.finished
      requests:
        - "curl --header 'Authorization: Bearer {{.env.secret_gremlin_token}}'
          --header 'Content-Type: application/json' --request POST --data
          '{\"hypothesis\":\"Traffic will be load-balanced to the two unaffected
          hosts.\"}'
          https://api.gremlin.com/v1/scenarios/7689a9ce-54dc-4015-89a9-ce54dcc0\
          1533/runs?teamId=54a4a0b0-c54d-4e4c-a4a0-b0c54d5e4c7a"
      envFrom:
        - name: secret_gremlin_token
          secretRef:
            name: gremlin
            key: token
      subscriptionID: 91f90864-07fc-4e82-a14d-d32e8749f1da
    - type: sh.keptn.event.evaluation.finished
      requests:
        - "curl --header 'Authorization: f4ebc9b7' --request POST
          https://webhook.site/f4ebc9b7-e00a-4e90-847a-e40a21bb49e8"
      subscriptionID: 0b0272e6-c5e9-4ed0-891a-49dcd010e885
